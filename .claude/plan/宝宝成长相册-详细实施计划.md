# å®å®æˆé•¿ç›¸å†Œ - è¯¦ç»†å®æ–½è®¡åˆ’ï¼ˆæ–¹æ¡ˆ Aï¼šæ¸è¿›å¼å®Œå–„ï¼‰

**åˆ¶å®šæ—¶é—´**: 2026-02-09
**ç­–ç•¥**: æ¸è¿›å¼å®Œå–„ï¼ˆåç«¯ä¼˜å…ˆï¼Œå‰ç«¯é€æ­¥å¯¹æ¥ï¼‰
**å¤šæ¨¡å‹åä½œ**: Codex (åç«¯) + Gemini (å‰ç«¯) + Claude (ç¼–æ’)

---

## ğŸ“Š é¡¹ç›®å½“å‰çŠ¶æ€

### âœ… å·²å®Œæˆ
- **åç«¯**: NestJS é¡¹ç›®åˆå§‹åŒ–ã€Prisma Schemaã€Auth æ¨¡å—ï¼ˆå®Œæ•´ï¼‰ã€Media æ¨¡å—ï¼ˆåŸºç¡€ï¼‰
- **å‰ç«¯**: Vite + React + TypeScript é¡¹ç›®åˆå§‹åŒ–ã€ä¾èµ–å®‰è£…ã€Tailwind CSS é…ç½®
- **æ•°æ®åº“**: SQLite å¼€å‘æ•°æ®åº“å·²åŒæ­¥

### â³ å¾…å®Œæˆ
- **åç«¯**: Usersã€Familiesã€Invitations æ¨¡å—ã€FamilyContext Guardã€å®¡è®¡æ—¥å¿—æ‹¦æˆªå™¨
- **å‰ç«¯**: å®Œæ•´é¡¹ç›®ç»“æ„ã€æ‰€æœ‰åŠŸèƒ½é¡µé¢å’Œç»„ä»¶

---

## ğŸ¯ å®æ–½ç­–ç•¥ï¼šæ¸è¿›å¼å®Œå–„

### æ ¸å¿ƒåŸåˆ™
1. **åç«¯ä¼˜å…ˆ** - API å…ˆç¨³å®šï¼Œå‰ç«¯å¯¹æ¥æ›´é¡ºç•…
2. **æ¨¡å—åŒ–å¼€å‘** - æŒ‰åŠŸèƒ½æ¨¡å—é€æ­¥å®Œå–„
3. **è¾¹å¼€å‘è¾¹éªŒè¯** - é™ä½é›†æˆé£é™©
4. **ä¿æŒæ•°æ®éš”ç¦»** - ä¸¥æ ¼çš„å¤šå®¶åº­ RBAC

---

## ğŸ“‹ å¼€å‘ä¼˜å…ˆçº§

### é˜¶æ®µ 1: åç«¯æ ¸å¿ƒæ¨¡å—ï¼ˆç¬¬ 1-3 å‘¨ï¼‰

#### 1.1 Users æ¨¡å—
**ç›®æ ‡**: è·å–å’Œæ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯

**æ–‡ä»¶ç»“æ„**:
```
backend/src/users/
â”œâ”€â”€ users.controller.ts
â”œâ”€â”€ users.service.ts
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ update-me.dto.ts
â”‚   â””â”€â”€ user-me.response.dto.ts
â”œâ”€â”€ users.module.ts
â””â”€â”€ guards/
    â””â”€â”€ current-user.guard.ts
```

**API ç«¯ç‚¹**:
| æ–¹æ³• | è·¯å¾„ | æè¿° | æƒé™ |
|------|------|------|------|
| GET | `/users/me` | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ | è®¤è¯ç”¨æˆ· |
| PATCH | `/users/me` | æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯ | è®¤è¯ç”¨æˆ· |

**å®‰å…¨éªŒè¯**:
- JWT è®¤è¯
- æ›´æ–° `currentFamilyId` æ—¶éªŒè¯ç”¨æˆ·æ˜¯å¦ä¸ºè¯¥å®¶åº­æˆå‘˜

---

#### 1.2 Families æ¨¡å—
**ç›®æ ‡**: å®¶åº­ CRUDã€æˆå‘˜ç®¡ç†ã€å®¶åº­åˆ‡æ¢

**æ–‡ä»¶ç»“æ„**:
```
backend/src/families/
â”œâ”€â”€ families.controller.ts
â”œâ”€â”€ families.service.ts
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ create-family.dto.ts
â”‚   â”œâ”€â”€ update-family.dto.ts
â”‚   â”œâ”€â”€ add-member.dto.ts
â”‚   â””â”€â”€ update-member-role.dto.ts
â”œâ”€â”€ families.module.ts
â””â”€â”€ guards/
    â”œâ”€â”€ family-owner.guard.ts
    â””â”€â”€ family-admin.guard.ts
```

**API ç«¯ç‚¹**:
| æ–¹æ³• | è·¯å¾„ | æè¿° | æƒé™ |
|------|------|------|------|
| POST | `/families` | åˆ›å»ºå®¶åº­ | è®¤è¯ç”¨æˆ· |
| GET | `/families` | è·å–æˆ‘çš„å®¶åº­åˆ—è¡¨ | è®¤è¯ç”¨æˆ· |
| GET | `/families/:id` | è·å–å®¶åº­è¯¦æƒ… | å®¶åº­æˆå‘˜ |
| PATCH | `/families/:id` | æ›´æ–°å®¶åº­ä¿¡æ¯ | OWNER/ADMIN |
| DELETE | `/families/:id` | åˆ é™¤å®¶åº­ | OWNER |
| POST | `/families/:id/members` | æ·»åŠ æˆå‘˜ | OWNER/ADMIN |
| PATCH | `/families/:id/members/:userId` | ä¿®æ”¹æˆå‘˜è§’è‰² | OWNER |
| DELETE | `/families/:id/members/:userId` | ç§»é™¤æˆå‘˜ | OWNER/ADMIN |
| POST | `/families/:id/switch` | åˆ‡æ¢å½“å‰å®¶åº­ | å®¶åº­æˆå‘˜ |

**å…³é”®åŠŸèƒ½**:
- åˆ›å»ºå®¶åº­æ—¶è‡ªåŠ¨åˆ›å»º OWNER æˆå‘˜
- åˆ é™¤å®¶åº­æ—¶çº§è”åˆ é™¤æˆå‘˜ã€ç…§ç‰‡ã€é‚€è¯·
- åˆ‡æ¢å®¶åº­æ›´æ–° `User.currentFamilyId`

---

#### 1.3 Invitations æ¨¡å—
**ç›®æ ‡**: é‚€è¯·ç ç”Ÿæˆã€éªŒè¯ã€æ¥å—/æ‹’ç»

**æ–‡ä»¶ç»“æ„**:
```
backend/src/invitations/
â”œâ”€â”€ invitations.controller.ts
â”œâ”€â”€ invitations.service.ts
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ create-invitation.dto.ts
â”‚   â”œâ”€â”€ accept-invitation.dto.ts
â”‚   â””â”€â”€ validate-invitation.dto.ts
â”œâ”€â”€ invitations.module.ts
â””â”€â”€ utils/
    â””â”€â”€ token-generator.ts
```

**API ç«¯ç‚¹**:
| æ–¹æ³• | è·¯å¾„ | æè¿° | æƒé™ |
|------|------|------|------|
| POST | `/families/:id/invitations` | åˆ›å»ºé‚€è¯· | OWNER/ADMIN |
| GET | `/invitations/validate?token=xxx` | éªŒè¯é‚€è¯·ç  | å…¬å¼€ |
| POST | `/invitations/accept` | æ¥å—é‚€è¯· | è®¤è¯ç”¨æˆ· |
| POST | `/invitations/reject` | æ‹’ç»é‚€è¯· | è®¤è¯ç”¨æˆ· |
| DELETE | `/families/:id/invitations/:id` | æ’¤é”€é‚€è¯· | OWNER/ADMIN |

**å®‰å…¨æœºåˆ¶**:
- é‚€è¯·ç ä½¿ç”¨ `crypto.randomBytes(32).toString('base64url')` ç”Ÿæˆ
- å­˜å‚¨ token hashï¼ˆéæ˜æ–‡ï¼‰
- éªŒè¯æ—¶æ£€æŸ¥ï¼šçŠ¶æ€=PENDINGã€æœªè¿‡æœŸã€æœªè¢«ä½¿ç”¨
- é€Ÿç‡é™åˆ¶éªŒè¯æ¥å£

---

#### 1.4 FamilyContext Guardï¼ˆç»Ÿä¸€ RBACï¼‰
**ç›®æ ‡**: ç»Ÿä¸€å®¶åº­èŒƒå›´å’Œæƒé™æ§åˆ¶

**æ–‡ä»¶ç»“æ„**:
```
backend/src/common/
â”œâ”€â”€ guards/
â”‚   â”œâ”€â”€ family-context.guard.ts
â”‚   â””â”€â”€ roles.guard.ts
â””â”€â”€ decorators/
    â”œâ”€â”€ current-user.decorator.ts
    â”œâ”€â”€ family-context.decorator.ts
    â””â”€â”€ roles.decorator.ts
```

**å®ç°é€»è¾‘**:
1. ä»è·¯ç”±å‚æ•°/æŸ¥è¯¢/user profile è·å– `familyId`
2. æŸ¥è¯¢ `FamilyMember` è¡¨éªŒè¯æˆå‘˜èº«ä»½
3. å°† `{ familyId, role }` æ³¨å…¥è¯·æ±‚ä¸Šä¸‹æ–‡
4. `@Roles()` è£…é¥°å™¨ + `RolesGuard` è¿›è¡Œæƒé™æ£€æŸ¥

**ä½¿ç”¨ç¤ºä¾‹**:
```typescript
@Get()
@FamilyContext()
@Roles(OWNER, ADMIN, MEMBER)
async getPhotos(@CurrentUser() user, @FamilyId() familyId) {
  // familyId å·²éªŒè¯ï¼Œrole å·²æ³¨å…¥
}
```

---

#### 1.5 å®¡è®¡æ—¥å¿—æ‹¦æˆªå™¨
**ç›®æ ‡**: è®°å½•æ‰€æœ‰æ•æ„Ÿæ“ä½œ

**è§¦å‘ç‚¹**:
- å†™å…¥æ“ä½œï¼ˆPOST/PATCH/DELETEï¼‰
- æ•æ„Ÿæ“ä½œï¼ˆè§’è‰²å˜æ›´ã€å®¶åº­åˆ é™¤ã€é‚€è¯·æ¥å—ï¼‰

**å­˜å‚¨ç­–ç•¥**:
- ä½¿ç”¨ NestJS Interceptor
- ä»…è®°å½•æˆåŠŸå“åº”ï¼ˆ2xxï¼‰
- å¼‚æ­¥å†™å…¥ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰

**ç´¢å¼•è®¾è®¡**:
- `(familyId, createdAt)`
- `(actorId, createdAt)`

---

### é˜¶æ®µ 2: å‰ç«¯åŸºç¡€æ¶æ„ï¼ˆç¬¬ 4 å‘¨ï¼‰

#### 2.1 ç›®å½•ç»“æ„ï¼ˆç‰¹æ€§é©±åŠ¨ï¼‰
```
frontend/src/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ client.ts              # Axios å®ä¾‹ + æ‹¦æˆªå™¨
â”‚   â”œâ”€â”€ queryKeys.ts           # TanStack Query keys
â”‚   â””â”€â”€ index.ts               # API è¯·æ±‚å‡½æ•°
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ common/                # Button, Input, Modal, Spinner
â”‚   â”œâ”€â”€ layout/                # MainLayout, Header, BottomNav
â”‚   â””â”€â”€ ui/                    # PhotoCard, FamilySelector
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ hooks/
â”‚   â”œâ”€â”€ family/
â”‚   â”œâ”€â”€ media/
â”‚   â””â”€â”€ invitations/
â”œâ”€â”€ hooks/                     # useMediaQuery, useDebounce
â”œâ”€â”€ pages/                     # é¡µé¢ç»„ä»¶
â”œâ”€â”€ router/
â”‚   â”œâ”€â”€ index.tsx
â”‚   â””â”€â”€ PrivateRoute.tsx
â”œâ”€â”€ store/                     # Zustand stores
â”‚   â”œâ”€â”€ authStore.ts
â”‚   â”œâ”€â”€ familyStore.ts
â”‚   â””â”€â”€ uiStore.ts
â”œâ”€â”€ types/                     # TypeScript ç±»å‹
â”œâ”€â”€ config/
â””â”€â”€ styles/
```

---

#### 2.2 çŠ¶æ€ç®¡ç†ï¼ˆZustandï¼‰

**authStore.ts**:
```typescript
interface AuthState {
  user: User | null
  token: string | null
  isAuthenticated: boolean
  login: (token: string, user: User) => void
  logout: () => void
  setToken: (token: string) => void
}
// æŒä¹…åŒ–ï¼šlocalStorage (token, user)
```

**familyStore.ts**:
```typescript
interface FamilyState {
  currentFamilyId: string | null
  setCurrentFamilyId: (id: string) => void
}
// æŒä¹…åŒ–ï¼šlocalStorage
```

**uiStore.ts**:
```typescript
interface UIState {
  notifications: Notification[]
  isUploadModalOpen: boolean
  addNotification: (notif: Notification) => void
  removeNotification: (id: string) => void
  toggleUploadModal: (isOpen: boolean) => void
}
```

---

#### 2.3 API å°è£…

**client.ts**:
```typescript
const apiClient = axios.create({
  baseURL: import.meta.env.VITE_API_URL,
})

// è¯·æ±‚æ‹¦æˆªå™¨ï¼šæ³¨å…¥ token
apiClient.interceptors.request.use((config) => {
  const token = authStore.getState().token
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
})

// å“åº”æ‹¦æˆªå™¨ï¼š401 è‡ªåŠ¨ç™»å‡º
apiClient.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      authStore.getState().logout()
      window.location.href = '/login'
    }
    return Promise.reject(error)
  }
)
```

**queryKeys.ts**:
```typescript
export const mediaKeys = {
  all: ['media'] as const,
  lists: () => [...mediaKeys.all, 'list'] as const,
  list: (familyId: string, filters: any) =>
    [...mediaKeys.lists(), { familyId, filters }] as const,
}
```

---

#### 2.4 è·¯ç”±è®¾è®¡

**router/index.tsx**:
```typescript
const router = createBrowserRouter([
  {
    path: '/',
    element: <PrivateRoute><MainLayout /></PrivateRoute>,
    children: [
      { index: true, element: <TimelinePage /> },
      { path: 'families', element: <FamilyPage /> },
      { path: 'invitations', element: <InvitationsPage /> },
      { path: 'settings', element: <SettingsPage /> },
    ],
  },
  { path: '/login', element: <LoginPage /> },
  { path: '/register', element: <RegisterPage /> },
])
```

**PrivateRoute.tsx**:
```typescript
const PrivateRoute = ({ children }) => {
  const isAuthenticated = useAuthStore((s) => s.isAuthenticated)
  return isAuthenticated ? children : <Navigate to="/login" replace />
}
```

---

#### 2.5 åŸºç¡€ç»„ä»¶åº“

**Common ç»„ä»¶**:
- `Button` (cva ç®¡ç†å˜ä½“: primary, secondary, danger)
- `Input` (æ–‡æœ¬ã€é‚®ç®±ã€å¯†ç )
- `Modal` (å¼¹çª—å®¹å™¨)
- `Spinner` (åŠ è½½æŒ‡ç¤ºå™¨)
- `Avatar` (ç”¨æˆ·å¤´åƒ)

**Layout ç»„ä»¶**:
- `MainLayout` (æ¡Œé¢ç«¯é¡¶éƒ¨å¯¼èˆª + ç§»åŠ¨ç«¯åº•éƒ¨ Tab)
- `AuthLayout` (å±…ä¸­ç™»å½•å¸ƒå±€)
- `Header` (åŒ…å«å®¶åº­é€‰æ‹©å™¨)
- `BottomNav` (ç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆª)

---

### é˜¶æ®µ 3: å‰ç«¯åŠŸèƒ½å®ç°ï¼ˆç¬¬ 5-7 å‘¨ï¼‰

#### 3.1 è®¤è¯ç³»ç»Ÿ

**ç»„ä»¶**:
- `LoginPage.tsx`
- `RegisterPage.tsx`
- `LoginForm.tsx`
- `RegisterForm.tsx`

**Hooks**:
```typescript
const useLogin = () => {
  return useMutation({
    mutationFn: (data: LoginDto) => authApi.login(data),
    onSuccess: (data) => {
      authStore.getState().login(data.accessToken, data.user)
    },
  })
}
```

---

#### 3.2 å®¶åº­ç®¡ç†

**ç»„ä»¶**:
- `FamilySelector.tsx` (Header ä¸­çš„ä¸‹æ‹‰èœå•)
- `FamilyList.tsx` (å®¶åº­åˆ—è¡¨é¡µé¢)
- `CreateFamilyModal.tsx`
- `MemberList.tsx` (æˆå‘˜ç®¡ç†)

**Hooks**:
```typescript
const useFamilies = () => useQuery({
  queryKey: familyKeys.lists(),
  queryFn: familyApi.getMyFamilies,
})

const useCreateFamily = () => {
  const queryClient = useQueryClient()
  return useMutation({
    mutationFn: familyApi.createFamily,
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: familyKeys.lists() })
    },
  })
}
```

---

#### 3.3 ç…§ç‰‡ç®¡ç†

**ç»„ä»¶**:
- `PhotoGrid.tsx` (ç€‘å¸ƒæµ/ç½‘æ ¼)
- `PhotoCard.tsx` (å•å¼ ç…§ç‰‡å¡ç‰‡)
- `UploadDropzone.tsx` (æ‹–æ‹½ä¸Šä¼ )
- `UploadProgress.tsx` (ä¸Šä¼ è¿›åº¦)
- `TimelinePage.tsx` (æ—¶é—´çº¿é¦–é¡µ)

**æ€§èƒ½ä¼˜åŒ–**:
- å›¾ç‰‡æ‡’åŠ è½½ (`loading="lazy"`)
- åˆ—è¡¨è™šæ‹ŸåŒ– (`@tanstack/react-virtual`)
- æ— é™æ»šåŠ¨ (`useInfiniteQuery`)

**Hooks**:
```typescript
const usePhotos = (familyId: string) => {
  return useInfiniteQuery({
    queryKey: mediaKeys.list(familyId, {}),
    queryFn: ({ pageParam = 1 }) => mediaApi.getPhotos(familyId, pageParam),
    initialPageParam: 1,
    getNextPageParam: (lastPage) => lastPage.meta.page < lastPage.meta.totalPages
      ? lastPage.meta.page + 1
      : undefined,
  })
}
```

---

#### 3.4 é‚€è¯·ç³»ç»Ÿ

**ç»„ä»¶**:
- `InviteGenerator.tsx` (ç”Ÿæˆé‚€è¯·é“¾æ¥)
- `InvitationList.tsx` (å¾…å¤„ç†é‚€è¯·)
- `InvitationCard.tsx` (é‚€è¯·å¡ç‰‡)

**Hooks**:
```typescript
const useCreateInvitation = (familyId: string) => {
  return useMutation({
    mutationFn: (data: CreateInvitationDto) =>
      invitationsApi.create(familyId, data),
  })
}
```

---

### é˜¶æ®µ 4: ç§»åŠ¨ç«¯é€‚é…ä¸ä¼˜åŒ–ï¼ˆç¬¬ 8 å‘¨ï¼‰

#### 4.1 å“åº”å¼è®¾è®¡

**å¯¼èˆªåˆ‡æ¢**:
```typescript
const MainLayout = () => {
  const isMobile = useMediaQuery('(max-width: 768px)')
  return (
    <>
      {!isMobile && <DesktopHeader />}
      <main>{children}</main>
      {isMobile && <BottomNav />}
    </>
  )
}
```

**ç½‘æ ¼å“åº”å¼**:
```tsx
<div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
  {photos.map((photo) => <PhotoCard key={photo.id} photo={photo} />)}
</div>
```

---

#### 4.2 æ€§èƒ½ä¼˜åŒ–

1. **ä»£ç åˆ†å‰²**: æ‰€æœ‰é¡µé¢ä½¿ç”¨ `React.lazy`
2. **å›¾ç‰‡æ‡’åŠ è½½**: `<img loading="lazy" />`
3. **åˆ—è¡¨è™šæ‹ŸåŒ–**: `@tanstack/react-virtual`
4. **å›¾ç‰‡ä¼˜åŒ–**: åç«¯æä¾›å¤šå°ºå¯¸ï¼Œå‰ç«¯æ ¹æ® DPR é€‰æ‹©

---

### é˜¶æ®µ 5: æµ‹è¯•ä¸éƒ¨ç½²ï¼ˆç¬¬ 9 å‘¨ï¼‰

#### 5.1 æµ‹è¯•æ¸…å•
- [ ] ç”¨æˆ·æ³¨å†Œ/ç™»å½•æµç¨‹
- [ ] åˆ›å»º/åˆ‡æ¢å®¶åº­
- [ ] ç…§ç‰‡ä¸Šä¼ ï¼ˆæ‰¹é‡ï¼‰
- [ ] é‚€è¯·ç”Ÿæˆ/æ¥å—
- [ ] æƒé™æ§åˆ¶ï¼ˆRBACï¼‰
- [ ] ç§»åŠ¨ç«¯å“åº”å¼
- [ ] æ€§èƒ½æµ‹è¯•ï¼ˆå¤§é‡ç…§ç‰‡ï¼‰

#### 5.2 éƒ¨ç½²å‡†å¤‡
- [ ] ç¯å¢ƒå˜é‡é…ç½®
- [ ] æ•°æ®åº“è¿ç§»è„šæœ¬
- [ ] Docker Compose é…ç½®
- [ ] Nginx åå‘ä»£ç†
- [ ] SSL/TLS è¯ä¹¦

---

## ğŸ”’ å®‰å…¨æ£€æŸ¥æ¸…å•

### åç«¯
- [ ] JWT Refresh Token æ—‹è½¬æœºåˆ¶
- [ ] FamilyContext Guard ç»Ÿä¸€åº”ç”¨
- [ ] é‚€è¯·ç é«˜ç†µç”Ÿæˆ
- [ ] é€Ÿç‡é™åˆ¶ï¼ˆéªŒè¯æ¥å£ï¼‰
- [ ] å®¡è®¡æ—¥å¿—å®Œæ•´è®°å½•
- [ ] æ–‡ä»¶ä¸Šä¼ ç±»å‹æ ¡éªŒ
- [ ] S3 é¢„ç­¾å URL çŸ­æœŸæœ‰æ•ˆ

### å‰ç«¯
- [ ] Token ä¸å­˜å‚¨åœ¨ localStorage
- [ ] 401 è‡ªåŠ¨ç™»å‡º
- [ ] XSS é˜²æŠ¤ï¼ˆå†…å®¹è½¬ä¹‰ï¼‰
- [ ] CSRF Tokenï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] è·¯ç”±æƒé™å®ˆå«
- [ ] æ•æ„Ÿä¿¡æ¯ä¸æš´éœ²

---

## ğŸ“ˆ æˆåŠŸæ ‡å‡†

### åŠŸèƒ½å®Œæ•´æ€§
- âœ… ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- âœ… å¤šå®¶åº­ç®¡ç†
- âœ… é‚€è¯·ç³»ç»Ÿ
- âœ… ç…§ç‰‡ä¸Šä¼ ï¼ˆæ‰¹é‡ï¼‰
- âœ… æ—¶é—´çº¿å±•ç¤º
- âœ… æˆå‘˜æƒé™ç®¡ç†
- âœ… å®¡è®¡æ—¥å¿—

### æ€§èƒ½æŒ‡æ ‡
- é¦–å±åŠ è½½ < 2s
- API å“åº” < 500ms
- å›¾ç‰‡æ‡’åŠ è½½æµç•…
- è™šæ‹ŸåŒ–æ»šåŠ¨ 60fps

### å®‰å…¨æŒ‡æ ‡
- æ— è¶Šæƒè®¿é—®
- æ‰€æœ‰æ•æ„Ÿæ“ä½œæœ‰æ—¥å¿—
- Token åˆ·æ–°æ­£å¸¸
- æ–‡ä»¶ä¸Šä¼ å®‰å…¨

---

## ğŸ“ å¤‡æ³¨

- **æ•°æ®åº“**: å¼€å‘ç¯å¢ƒä½¿ç”¨ SQLiteï¼Œç”Ÿäº§ç¯å¢ƒè¿ç§»è‡³ PostgreSQL
- **æ–‡ä»¶å­˜å‚¨**: å¼€å‘ç¯å¢ƒä½¿ç”¨ MinIOï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨äº‘ S3
- **å›¾ç‰‡å¤„ç†**: Sharp ç”Ÿæˆä¸‰ç§å°ºå¯¸ï¼ˆoriginal, resized, thumbï¼‰
- **ä¼šè¯ç®¡ç†**: JWT (Access Token 15min + Refresh Token 30d)
- **å¤šæ¨¡å‹ä¼šè¯ ID**:
  - Codex: `019c4025-35a1-7450-91a6-9c934c9897c8`
  - Gemini: `39f39414-7ee0-4bc4-9a90-2646dc00b7a7`

---

**ä¸‹ä¸€æ­¥**: ç”¨æˆ·æ‰¹å‡†è®¡åˆ’åï¼Œè¿›å…¥ [æ¨¡å¼ï¼šæ‰§è¡Œ] å¼€å§‹ä»£ç å¼€å‘ã€‚
