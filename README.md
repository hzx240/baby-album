# 馃懚 瀹濆疂鎴愰暱鐩稿唽

> 鐢ㄧ埍璁板綍瀹濆疂鐨勬瘡涓€涓弽璐电灛闂达紝鍒嗕韩鎴愰暱鐨勫枩鎮?
涓€涓畨鍏ㄣ€佺瀵嗙殑瀹跺涵鐓х墖鐩稿唽搴旂敤锛屼笓涓虹埗姣嶈褰曞疂瀹濇垚闀垮巻绋嬭€岃璁°€傛敮鎸佸搴垚鍛樺崗浣溿€佺収鐗囨爣绛俱€佹櫤鑳藉垎缁勭瓑鍔熻兘銆?
## 鉁?椤圭洰浜偣

### 馃幆 鏍稿績鍔熻兘

- **馃懚 瀹濊礉绠＄悊** - 涓烘瘡涓疂璐濆垱寤轰笓灞炵殑鎴愰暱妗ｆ
- **馃摳 鐓х墖绠＄悊** - 鏀寔楂樻竻鐓х墖涓婁紶銆佹櫤鑳藉帇缂┿€佺缉鐣ュ浘鐢熸垚
- **馃懆鈥嶐煈┾€嶐煈р€嶐煈?瀹跺涵鍗忎綔** - 閭€璇峰搴垚鍛樺叡鍚岃褰曪紝鏀寔瑙掕壊鏉冮檺绠＄悊
- **馃搮 鏅鸿兘鍒嗙粍** - 鎸夋椂闂磋嚜鍔ㄥ垎缁勶紝鏀寔瀹濊礉绛涢€?- **馃攳 鐓х墖鏌ョ湅鍣?* - 娌夋蹈寮忓ぇ鍥炬祻瑙堬紝鏀寔涓嬭浇鍜屽垹闄?- **馃捑 浜戠瀛樺偍** - 鍩轰簬 S3 鐨勫璞″瓨鍌紝鏀寔楂樺苟鍙戣闂?
### 馃帹 鐢ㄦ埛浣撻獙

- **馃挮 绮剧編 UI** - 閲囩敤 Tailwind CSS 鎵撻€犵殑鐜颁唬鍖栫晫闈?- **鉁?娴佺晠鍔ㄧ敾** - 绮惧績璁捐鐨勮繃娓℃晥鏋滃拰鍔犺浇鍔ㄧ敾
- **馃摫 鍝嶅簲寮忚璁?* - 瀹岀編閫傞厤妗岄潰绔拰绉诲姩绔?- **馃敀 瀹夊叏绉佸瘑** - JWT 璁よ瘉 + 瀹跺涵鎴愬憳鏉冮檺鎺у埗
- **鈿?蹇€熷搷搴?* - 浼樺寲鐨勫浘鐗囧姞杞藉拰缂撳瓨绛栫暐

### 馃洜锔?鎶€鏈寒鐐?
- **TypeScript 鍏ㄦ爤** - 鍓嶅悗绔被鍨嬪畨鍏紝鍑忓皯杩愯鏃堕敊璇?- **RESTful API** - 绗﹀悎鏈€浣冲疄璺电殑鎺ュ彛璁捐
- **鏁版嵁搴撹璁?* - Prisma ORM + 绾ц仈鍒犻櫎纭繚鏁版嵁涓€鑷存€?- **閭€璇锋満鍒?* - 鍩轰簬 Token 鐨勫搴個璇风郴缁燂紝鏀寔杩囨湡鎺у埗
- **鍥剧墖澶勭悊** - 鑷姩鐢熸垚鍘熷浘銆佸帇缂╁浘銆佺缉鐣ュ浘涓夌瑙勬牸
- **閲嶅妫€娴?* - SHA-256 鏍￠獙闃叉閲嶅涓婁紶

## 馃彈锔?鎶€鏈灦鏋?
### 鍓嶇鎶€鏈爤

```
React 19
鈹溾攢鈹€ React Router v7 - 璺敱绠＄悊
鈹溾攢鈹€ Zustand - 杞婚噺绾х姸鎬佺鐞?鈹溾攢鈹€ Axios - HTTP 瀹㈡埛绔?鈹溾攢鈹€ TanStack Query - 鏁版嵁缂撳瓨涓庣姸鎬佸悓姝?鈹斺攢鈹€ Tailwind CSS - 鍘熷瓙鍖?CSS 妗嗘灦
```

### 鍚庣鎶€鏈爤

```
NestJS 11
鈹溾攢鈹€ Prisma - ORM 涓庢暟鎹簱杩佺Щ
鈹溾攢鈹€ Passport + JWT - 璁よ瘉鎺堟潈
鈹溾攢鈹€ Class Validator - 璇锋眰楠岃瘉
鈹溾攢鈹€ bcrypt - 瀵嗙爜鍔犲瘑
鈹溾攢鈹€ Sharp - 鍥剧墖澶勭悊
鈹斺攢鈹€ AWS SDK S3 - 瀵硅薄瀛樺偍闆嗘垚
```

### 鍩虹璁炬柦

- **鏁版嵁搴?* - SQLite锛堝紑鍙戯級/ PostgreSQL锛堢敓浜э級
- **瀵硅薄瀛樺偍** - AWS S3 鎴?MinIO锛堣嚜鎵樼锛?- **缂撳瓨** - TanStack Query 鍓嶇缂撳瓨
- **API 璁捐** - RESTful + 鍒嗛〉 + 鎺掑簭

### 鏁版嵁搴撹璁?
```
users (鐢ㄦ埛琛?
  鈫?1:1
families (瀹跺涵琛?
  鈫?1:N
children (瀹濊礉琛? + photos (鐓х墖琛? + family_members (鎴愬憳琛?

family_invitations (閭€璇疯〃) - Token 閭€璇锋満鍒?refresh_tokens (鍒锋柊浠ょ墝琛? - JWT 鍒锋柊鏀寔
audit_logs (瀹¤鏃ュ織琛? - 鎿嶄綔璁板綍
```

## 馃搧 椤圭洰缁撴瀯

```
.
鈹溾攢鈹€ backend/                 # 鍚庣鏈嶅姟
鈹?  鈹溾攢鈹€ prisma/
鈹?  鈹?  鈹斺攢鈹€ schema.prisma    # 鏁版嵁搴撴ā鍨嬪畾涔?鈹?  鈹溾攢鈹€ src/
鈹?  鈹?  鈹溾攢鈹€ auth/           # 璁よ瘉妯″潡
鈹?  鈹?  鈹溾攢鈹€ children/        # 瀹濊礉绠＄悊
鈹?  鈹?  鈹溾攢鈹€ photos/          # 鐓х墖绠＄悊
鈹?  鈹?  鈹溾攢鈹€ members/         # 瀹跺涵鎴愬憳
鈹?  鈹?  鈹溾攢鈹€ invitations/      # 閭€璇风郴缁?鈹?  鈹?  鈹溾攢鈹€ common/          # 閫氱敤缁勪欢锛堣楗板櫒銆佸畧鍗瓑锛?鈹?  鈹?  鈹斺攢鈹€ main.ts         # 搴旂敤鍏ュ彛
鈹?  鈹斺攢鈹€ .env.example        # 鐜鍙橀噺妯℃澘
鈹?鈹溾攢鈹€ frontend/               # 鍓嶇搴旂敤
鈹?  鈹溾攢鈹€ src/
鈹?  鈹?  鈹溾攢鈹€ pages/         # 椤甸潰缁勪欢
鈹?  鈹?  鈹溾攢鈹€ components/     # 鍙鐢ㄧ粍浠?鈹?  鈹?  鈹溾攢鈹€ stores/        # Zustand 鐘舵€佺鐞?鈹?  鈹?  鈹溾攢鈹€ api/           # API 瀹㈡埛绔?鈹?  鈹?  鈹溾攢鈹€ lib/           # 宸ュ叿鍑芥暟
鈹?  鈹?  鈹溾攢鈹€ types/         # TypeScript 绫诲瀷瀹氫箟
鈹?  鈹?  鈹斺攢鈹€ layouts/       # 甯冨眬缁勪欢
鈹?  鈹斺攢鈹€ .env.example       # 鐜鍙橀噺妯℃澘
鈹?鈹斺攢鈹€ README.md
```

## 馃殌 蹇€熷惎鍔?
### 鐜瑕佹眰

- **Node.js** >= 18.17.0
- **npm** >= 9.0.0
- **Git** >= 2.0

### 1. 鍏嬮殕椤圭洰

```bash
git clone https://github.com/your-username/baby-album.git
cd baby-album
```

### 2. 鍚庣璁剧疆

```bash
cd backend

# 瀹夎渚濊禆
npm install

# 澶嶅埗鐜鍙橀噺鏂囦欢
cp .env.example .env

# 缂栬緫 .env 鏂囦欢锛岄厤缃互涓嬪彉閲忥細
# - DATABASE_URL=file:./dev.db
# - JWT_SECRET=your-secret-key
# - AWS_ACCESS_KEY_ID=your-access-key
# - AWS_SECRET_ACCESS_KEY=your-secret-key
# - S3_ENDPOINT=http://localhost:9000
# - S3_BUCKET=baby-album

# 鐢熸垚 Prisma Client
npx prisma generate

# 鍒涘缓鏁版嵁搴撳苟鎵ц杩佺Щ
npx prisma db push

# 鍚姩寮€鍙戞湇鍔″櫒
npm run start:dev
```

鍚庣灏嗚繍琛屽湪 `http://localhost:3001`

### 3. 鍓嶇璁剧疆

```bash
cd frontend

# 瀹夎渚濊禆
npm install

# 澶嶅埗鐜鍙橀噺鏂囦欢锛堝闇€鑷畾涔?API 鍦板潃锛?cp .env.example .env

# 鍚姩寮€鍙戞湇鍔″櫒
npm run dev
```

鍓嶇灏嗚繍琛屽湪 `http://localhost:5173`

### 4. MinIO 璁剧疆锛堝彲閫夛紝鐢ㄤ簬鏈湴瀵硅薄瀛樺偍锛?
浣跨敤 Docker 蹇€熷惎鍔?MinIO锛?
```bash
docker run -d \
  --name minio \
  -p 9000:9000 \
  -p 9001:9001 \
  -e "MINIO_ROOT_USER=minioadmin" \
  -e "MINIO_ROOT_PASSWORD=minioadmin" \
  minio/minio server /data --console-address ":9001"
```

璁块棶 MinIO 鎺у埗鍙帮細`http://localhost:9001`

## 馃敡 鐜鍙橀噺璇存槑

### 鍚庣鐜鍙橀噺 (.env)

```bash
# 鏁版嵁搴?DATABASE_URL="file:./dev.db"              # 寮€鍙戠幆澧冧娇鐢?SQLite

# JWT 閰嶇疆
JWT_SECRET="your-super-secret-key-change-me"
JWT_EXPIRES_IN="1h"
REFRESH_TOKEN_EXPIRES_IN="7d"

# AWS S3 / MinIO 閰嶇疆
AWS_REGION="us-east-1"
AWS_ACCESS_KEY_ID="your-access-key"
AWS_SECRET_ACCESS_KEY="your-secret-key"
S3_ENDPOINT="http://localhost:9000"        # MinIO 浣跨敤鏈湴鍦板潃锛孲3 浣跨敤浜戝湴鍧€
S3_BUCKET="baby-album"
S3_USE_SSL="false"                         # MinIO 鏈湴寮€鍙戣涓?false

# 鍥剧墖澶勭悊閰嶇疆
MAX_PHOTO_SIZE=52428800                     # 50MB
UPLOAD_TIMEOUT=300000                         # 5 鍒嗛挓
```

### 鍓嶇鐜鍙橀噺 (.env)

```bash
VITE_API_BASE_URL=http://localhost:3001          # 鍚庣 API 鍦板潃
```

## 馃摳 鍔熻兘鎴浘

> 锛堝彲閫夛細娣诲姞椤圭洰鎴浘灞曠ず鐣岄潰鏁堟灉锛?
## 馃И 娴嬭瘯

### 鍚庣娴嬭瘯

```bash
cd backend

# 鍗曞厓娴嬭瘯
npm run test

# 娴嬭瘯瑕嗙洊鐜?npm run test:cov

# E2E 娴嬭瘯
npm run test:e2e
```

### 鍓嶇娴嬭瘯

```bash
cd frontend

# Lint 妫€鏌?npm run lint

# 绫诲瀷妫€鏌?npm run build
```

## 馃殌 鐢熶骇閮ㄧ讲

### 鍚庣閮ㄧ讲

```bash
cd backend

# 鏋勫缓鐢熶骇鐗堟湰
npm run build

# 鍚姩鐢熶骇鏈嶅姟鍣?npm run start:prod
```

鐢熶骇鐜寤鸿锛?1. 浣跨敤 PostgreSQL 鏇夸唬 SQLite
2. 閰嶇疆鍙嶅悜浠ｇ悊锛圢ginx锛?3. 璁剧疆鐜鍙橀噺 `NODE_ENV=production`
4. 鍚敤 CORS 鐧藉悕鍗?5. 浣跨敤浜戞湇鍔★紙AWS S3銆侀樋閲屼簯 OSS锛?
### 鍓嶇閮ㄧ讲

```bash
cd frontend

# 鏋勫缓闈欐€佹枃浠?npm run build

# 棰勮鏋勫缓缁撴灉
npm run preview
```

閮ㄧ讲 `dist/` 鐩綍鍒伴潤鎬佹墭绠℃湇鍔★紙Vercel銆丯etlify銆丯ginx锛?
## 馃攼 瀹夊叏寤鸿

- [ ] 淇敼鎵€鏈夐粯璁ゅ瘑閽ュ拰瀵嗙爜
- [ ] 鍚敤 HTTPS锛堢敓浜х幆澧冿級
- [ ] 閰嶇疆 CORS 鐧藉悕鍗?- [ ] 瀹氭湡澶囦唤鏁版嵁搴?- [ ] 璁剧疆 S3 鐢熷懡鍛ㄦ湡绛栫暐
- [ ] 鍚敤璇锋眰閫熺巼闄愬埗
- [ ] 瀹氭湡鏇存柊渚濊禆鍖?
## 馃洠锔?寮€鍙戣矾绾垮浘

- [ ] 鐓х墖鏍囩绠＄悊
- [ ] 鐓х墖鎼滅储鍔熻兘
- [ ] 鐓х墖鍒嗕韩锛堢敓鎴愬垎浜摼鎺ワ級
- [ ] 瑙嗛涓婁紶鏀寔
- [ ] 鐓х墖鎵归噺缂栬緫
- [ ] 鏁版嵁缁熻涓庡彲瑙嗗寲
- [ ] 绉诲姩绔?App锛圧eact Native锛?- [ ] 鐓х墖 AI 璇嗗埆涓庡垎绫?
## 馃 璐＄尞鎸囧崡

娆㈣繋鎻愪氦 Issue 鍜?Pull Request锛?
1. Fork 鏈粨搴?2. 鍒涘缓鐗规€у垎鏀?(`git checkout -b feature/AmazingFeature`)
3. 鎻愪氦鏇存敼 (`git commit -m 'Add some AmazingFeature'`)
4. 鎺ㄩ€佸埌鍒嗘敮 (`git push origin feature/AmazingFeature`)
5. 寮€鍚?Pull Request

## 馃搫 璁稿彲璇?
鏈」鐩噰鐢?MIT 璁稿彲璇?- 鏌ョ湅 [LICENSE](LICENSE) 鏂囦欢浜嗚В璇︽儏

## 馃檹 鑷磋阿

- [NestJS](https://nestjs.com/) - 娓愯繘寮?Node.js 妗嗘灦
- [React](https://react.dev/) - 鐢ㄦ埛鐣岄潰搴?- [Prisma](https://www.prisma.io/) - 涓嬩竴浠?ORM
- [Tailwind CSS](https://tailwindcss.com/) - CSS 妗嗘灦
- [Sharp](https://sharp.pixelplumbing.com/) - 楂樻€ц兘鍥剧墖澶勭悊

---

**馃挄 鐢ㄧ埍璁板綍瀹濆疂鐨勬瘡涓€涓灛闂?*

濡傛湁闂鎴栧缓璁紝璇锋彁浜?[Issue](https://github.com/your-username/baby-album/issues)
